<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <title>CJ Admin </title>
    <th:block th:replace="~{fragment/fragment :: cjLearning_head}"/>

</head>

<body>

<body class="hold-transition sidebar-mini layout-fixed layout-navbar-fixed layout-footer-fixed">
<div class="wrapper">
    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand navbar-white navbar-light">
        <!-- Left navbar links -->
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
            </li>
            <li class="nav-item d-none d-sm-inline-block">
                <a href="index3.html" class="nav-link">Home</a>
            </li>
            <li class="nav-item d-none d-sm-inline-block">
                <a href="#" class="nav-link">Contact</a>
            </li>
        </ul>

        <!-- SEARCH FORM -->
        <form class="form-inline ml-3">
            <div class="input-group input-group-sm">
                <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
                <div class="input-group-append">
                    <button class="btn btn-navbar" type="submit">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </form>

        <!-- Right navbar links -->
        <ul class="navbar-nav ml-auto">
            <!-- Messages Dropdown Menu -->
            <li class="nav-item dropdown">
                <a class="nav-link" data-toggle="dropdown" href="#">
                    <i class="far fa-comments"></i>
                    <span class="badge badge-danger navbar-badge">3</span>
                </a>
                <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                    <a href="#" class="dropdown-item">
                        <!-- Message Start -->
                        <div class="media">
                            <img th:src="@{/node_modules/admin-lte/dist/img/user1-128x128.jpg}" src="node_modules/admin-lte/dist/img/user1-128x128.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle">
                            <div class="media-body">
                                <h3 class="dropdown-item-title">
                                    Brad Diesel
                                    <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                                </h3>
                                <p class="text-sm">Call me whenever you can...</p>
                                <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                            </div>
                        </div>
                        <!-- Message End -->
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item">
                        <!-- Message Start -->
                        <div class="media">
                            <img th:src="@{/node_modules/admin-lte/dist/img/user8-128x128.jpg}" src="node_modules/admin-lte/dist/img/user8-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                            <div class="media-body">
                                <h3 class="dropdown-item-title">
                                    John Pierce
                                    <span class="float-right text-sm text-muted"><i class="fas fa-star"></i></span>
                                </h3>
                                <p class="text-sm">I got your message bro</p>
                                <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                            </div>
                        </div>
                        <!-- Message End -->
                    </a>

                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
                </div>
            </li>
            <!-- Notifications Dropdown Menu -->
            <li class="nav-item dropdown">
                <a class="nav-link" data-toggle="dropdown" href="#">
                    <i class="far fa-bell"></i>
                    <span class="badge badge-warning navbar-badge">15</span>
                </a>
                <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                    <span class="dropdown-item dropdown-header">15 Notifications</span>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item">
                        <i class="fas fa-envelope mr-2"></i> 4 new messages
                        <span class="float-right text-muted text-sm">3 mins</span>
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item">
                        <i class="fas fa-users mr-2"></i> 8 friend requests
                        <span class="float-right text-muted text-sm">12 hours</span>
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item">
                        <i class="fas fa-file mr-2"></i> 3 new reports
                        <span class="float-right text-muted text-sm">2 days</span>
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-widget="control-sidebar" data-slide="false"  href="#" role="button"><i
                        class="fas fa-th-large"></i></a>
            </li>
        </ul>
    </nav>
    <!-- /.navbar -->


        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            <!-- Brand Logo -->
            <a href="/" class="brand-link">
                <img th:src="@{/node_modules/admin-lte/dist/img/AdminLTELogo.png}" src="node_modules/admin-lte/dist/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3"
                     style="opacity: .8">
                <span class="brand-text font-weight-light">AdminLTE 3</span>
            </a>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Sidebar user panel (optional) -->
                <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                    <div class="image">
                        <img th:src="@{/node_modules/admin-lte/dist/img/user2-160x160.jpg}" src="node_modules/admin-lte/dist/img/user2-160x160.jpg" class="img-circle elevation-2" alt="User Image">
                    </div>
                    <div class="info">
                        <a href="#" class="d-block">Anonymous Pierce</a>
                    </div>
                </div>

                <!-- Sidebar Menu -->
                <nav th:replace="~{fragment/fragment :: cjLeftSideBar}"></nav>
                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->
        </aside>
        <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
        1<br />
    </div>
    <!-- /.content-wrapper -->

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark" style="background-color: brown;">
        <!-- Control sidebar content goes here -->
    </aside>

    <!-- Main Footer -->
    <footer th:replace="~{fragment/fragment :: cjMainFooter}"></footer>
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->
<th:block th:replace="~{fragment/fragment :: cjLearning_js}" />
<script>

var cjLTESideBar;
var cjLTESideBarDom =  $('.nav-sidebar');
var cjLTESideBarCurrentLi;

/*
* 找到本页面对应的左侧导航栏，并打开
* */
function openCurrentMenu() {
    console.log("openCurrentMenu()...")
    //关闭所有选中项
    // cjLTESideBarDom.filter(".menu-open").removeClass("menu-open");
    // cjLTESideBarDom.filter(".active").removeClass("active");
    let cjTargetA;
    // console.log("window.location.pathname : ",window.location.pathname);
    $('.nav-sidebar a').each(function(i){
        // console.log('.sidebar-menu a : ',$(this).attr('href'));
        if($(this).attr('href')==window.location.pathname) {
            cjTargetA=$(this);
            // console.log("cjTargetA : " ,cjTargetA);
        }
    });

    /*以下注释为一次尝试*/
    // let cjTargetUL = cjTargetA.siblings("ul");
    // let cjTargetLi = cjTargetA.parent("li");
    // console.log("cjTargetUL : " ,cjTargetUL);
    // console.log("cjTargetLi : " ,cjTargetLi);
    // cjLTESideBar.expand(cjTargetUL, cjTargetLi);
    cjLTESideBarCurrentLi = cjTargetA.parent("li");
    let cjTargetLis = cjTargetA.parents("li");
    $.each(cjTargetLis, function (index,item) {
        console.log(index,"--->",item);
        if($(item).hasClass("has-treeview")){
            $(item).addClass("menu-open");
        }
        $(item).find("a:first").addClass("active");
    })


}
// function cjInitSideBar(){
//     let options = {
//         animationSpeed : 300,
//         accordion : false
//     }
//     cjLTESideBar = $('ul.nav-sidebar').Treeview(options);
// }

$(document).ready(function(){
    // cjInitSideBar();
    openCurrentMenu();
});
// cjLTESideBarDom.on("click","li",function () {
//     let cjSelectedLi  = $(this);
//
//     // if($(this).attr("id")==cjLTESideBarCurrentLi.attr("id")){
//     //
//     // }else
//         if(cjSelectedLi.find("a:first").attr('href')=="#"){
//         console.log(" cjSelectedLi ..");
//         //清除左側导航栏所有的选中状态
//         cjLTESideBarDom.find(".menu-open").removeClass("menu-open");
//         cjLTESideBarDom.find("li a.active").removeClass("active");
//
//         if(cjSelectedLi.hasClass("has-treeview")){
//             cjSelectedLi.addClass("menu-open");
//         }
//             cjSelectedLi.find("a:first").addClass("active");
//
//         let cjTargetLis = cjSelectedLi.parents("li");
//
//         $.each(cjTargetLis, function (index,item) {
//             if($(item).hasClass("has-treeview")){
//                 $(item).addClass("menu-open");
//             }
//             $(item).find("a:first").addClass("active");
//         })
//             return false;
//     }
// })
</script>
</body>



</body>

</html>
